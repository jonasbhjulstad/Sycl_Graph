function(add_custom_executable source_file)
    add_executable(${source_file} "${source_file}.cpp")
    target_link_libraries(${source_file} PUBLIC Static_RNG oneDPL)
    target_compile_options(${source_file} PUBLIC ${SYCL_COMPILE_OPTIONS})
    target_compile_options(${source_file} PUBLIC ${DEFAULT_WARNING_FLAGS})
    target_compile_options(${source_file} PUBLIC "-fprebuilt-module-path=${SYCL_GRAPH_PRECOMPILE_DIR}")
    target_compile_options(${source_file} PRIVATE -fsycl -sycl-std=2020 -std=c++20 -fsycl-unnamed-lambda)
    add_dependencies(${source_file} ${SYCL_GRAPH_PCM_TARGETS})
    if(${SYCL_GRAPH_USE_CUDA})
        target_compile_options(${source_file} PRIVATE ${SYCL_GRAPH_CUDA_FLAGS})
        target_link_options(${source_file} PRIVATE ${SYCL_GRAPH_CUDA_FLAGS})
    endif()
    target_link_options(${source_file} PRIVATE ${DPCPP_FLAGS} -sycl-std=2020 -std=c++20 -fsycl-unnamed-lambda)
endfunction()

function(add_custom_module source_file)
    add_library(${source_file} STATIC "${source_file}.cxx")
    target_link_libraries(${source_file} PUBLIC Static_RNG oneDPL)
    target_compile_options(${source_file} PUBLIC ${SYCL_COMPILE_OPTIONS})
    target_compile_options(${source_file} PUBLIC ${DEFAULT_WARNING_FLAGS})
    target_compile_options(${source_file} PUBLIC "-fprebuilt-module-path=${SYCL_GRAPH_PRECOMPILE_DIR}")
    target_compile_options(${source_file} PRIVATE -fsycl -sycl-std=2020 -std=c++20 -fsycl-unnamed-lambda)
    if(${SYCL_GRAPH_USE_CUDA})
        target_compile_options(${source_file} PRIVATE ${SYCL_GRAPH_CUDA_FLAGS})
        target_link_options(${source_file} PRIVATE ${SYCL_GRAPH_CUDA_FLAGS})
    endif()
    target_link_options(${source_file} PRIVATE ${DPCPP_FLAGS} -sycl-std=2020 -std=c++20 -fsycl-unnamed-lambda)
endfunction()